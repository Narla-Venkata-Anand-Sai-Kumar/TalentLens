# TalentLens Configuration Guide

This directory contains configuration files for TalentLens development and production environments.

## Files

### `local.env.example`

Template file showing all available environment variables with their default values. Copy this file to create your own configuration.

### `local.env`

Your actual environment configuration file. This file is automatically generated by the setup script or can be created manually.

**⚠️ Important**: Never commit `local.env` to version control as it may contain sensitive information like API keys and passwords.

## Environment Variables Reference

### Database Configuration

- `DB_NAME` - Database name (default: talentlens_dev)
- `DB_USER` - Database username (default: postgres)
- `DB_PASSWORD` - Database password (default: password)
- `DB_HOST` - Database host (default: localhost)
- `DB_PORT` - Database port (default: 5432)
- `DATABASE_URL` - Full database connection URL (auto-generated)

### Django Configuration

- `SECRET_KEY` - Django secret key for security (auto-generated)
- `DEBUG` - Enable Django debug mode (default: True)
- `ALLOWED_HOSTS` - Comma-separated list of allowed hosts
- `LOG_LEVEL` - Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)

### Redis Configuration

- `REDIS_HOST` - Redis host (default: localhost)
- `REDIS_PORT` - Redis port (default: 6379)
- `REDIS_DB` - Redis database number (default: 0)
- `REDIS_URL` - Full Redis connection URL (auto-generated)

### AI Configuration

- `GEMINI_API_KEY` - Google Gemini AI API key for interview analysis

### Email Configuration

- `EMAIL_HOST` - SMTP server host (default: smtp.gmail.com)
- `EMAIL_PORT` - SMTP server port (default: 587)
- `EMAIL_HOST_USER` - Email username
- `EMAIL_HOST_PASSWORD` - Email password or app password
- `EMAIL_USE_TLS` - Use TLS encryption (default: True)
- `EMAIL_USE_SSL` - Use SSL encryption (default: False)

### CORS Settings

- `CORS_ALLOWED_ORIGINS` - Comma-separated list of allowed origins for CORS

### UI Application Configuration

- `NEXT_PUBLIC_API_URL` - API URL for frontend applications
- `NEXT_PUBLIC_WS_URL` - WebSocket URL for real-time features
- `STUDENT_UI_PORT` - Port for Student UI (default: 3000)
- `TEACHER_UI_PORT` - Port for Teacher UI (default: 3001)
- `ADMIN_UI_PORT` - Port for Admin UI (default: 3002)

### Development Settings

- `POSTGRES_MODE` - Database mode: 'local' or 'docker'
- `REDIS_MODE` - Redis mode: 'local' or 'docker'
- `UI_MODE` - UI mode: 'local' or 'docker'
- `DJANGO_DEBUG_TOOLBAR` - Enable Django debug toolbar

## Quick Setup

1. **Copy the example file**:

   ```bash
   cp config/local.env.example config/local.env
   ```

2. **Edit the configuration**:

   ```bash
   nano config/local.env
   # or
   vim config/local.env
   ```

3. **Update key values**:

   - Set your `GEMINI_API_KEY`
   - Configure database credentials if different from defaults
   - Set email configuration if using email features
   - Adjust ports if they conflict with other services

4. **Restart the application** to apply changes:
   ```bash
   ./stop.sh && ./start.sh
   ```

## Security Notes

- **API Keys**: Never share or commit API keys to version control
- **Passwords**: Use strong passwords for production environments
- **Secret Key**: Django secret key should be unique and kept secret
- **Environment**: Use different configurations for development, staging, and production

## Production Considerations

For production environments:

1. **Set `DEBUG=False`** to disable debug mode
2. **Use strong passwords** for database and email
3. **Configure proper `ALLOWED_HOSTS`** with your domain names
4. **Use environment-specific configurations** for different stages
5. **Enable SSL/TLS** for secure connections
6. **Consider using external configuration management** (e.g., AWS Parameter Store, Azure Key Vault)

## Troubleshooting

### Common Issues

**Environment variables not loading**:

- Ensure the file is named `local.env` (not `local.env.txt`)
- Check file permissions: `chmod 644 config/local.env`
- Verify the file is in the correct location: `config/local.env`

**Database connection errors**:

- Verify PostgreSQL is running
- Check database credentials in `local.env`
- Ensure the database exists: `CREATE DATABASE talentlens_dev;`

**Port conflicts**:

- Check if ports are already in use: `lsof -i :3000`
- Update port numbers in `local.env`
- Restart the application after changes

**API key errors**:

- Verify your Gemini API key is valid
- Check if the API key has necessary permissions
- Ensure there are no extra spaces or characters in the key
